<!doctype html>
<html>
<head>
<style>
body{
    font-family:Arial;
    background:#f2f2f2;
    padding:20px;
}

h2{
    text-align:center;
}

.form-box{
    width:400px;
    margin:20px auto;
    background:#fff;
    padding:20px;
}

input, textarea, select{
    width:100%;
    padding:10px;
    margin:8px 0;
}

button{
    width:100%;
    padding:10px;
}

.notes-container{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(200px,1fr));
    gap:15px;
    margin-top:30px;
}

.card{
    background:#fff;
    padding:15px;
    border:1px solid #ddd;
}

.small{
    font-size:12px;
    color:gray;
}
</style>
</head>

<body>

<h2>User Dashboard</h2>
<div style="text-align:right; margin-bottom:20px;">
    <a href="{% url 'logout' %}" 
       style="padding:8px 15px; background:#eee; text-decoration:none;">
       Logout
    </a>
</div>

<!-- Note Form -->
<div class="form-box">
    <form method="post" action="{% url 'add_note' %}">
        {% csrf_token %}
        
        <textarea name="note" placeholder="Write your note..." required></textarea>

        <select name="is_work">
            <option value="False">Personal Note</option>
            <option value="True">Work Note</option>
        </select>

        <button type="submit">Add Note</button>
    </form>
</div>


<!-- Notes Grid -->
<div class="notes-container">
    {% for note in notes %}
        {% if note.is_active %}
        <div class="card">
            <p>{{ note.notes }}</p>

            {% if note.is_work %}
                <p class="small">Type: Work</p>
                <p class="small">Manager Status: {{ note.manager_request }}</p>
            {% else %}
                <p class="small">Type: Personal</p>
            {% endif %}

            {% if note.is_work %}
            <form method="post" action="{% url 'request_delete' note.id %}">
                {% csrf_token %}
                <button type="submit">Request Delete</button>
            </form>
            {% endif %}
        </div>
        {% endif %}
    {% empty %}
        <p>No Notes Found</p>
    {% endfor %}
</div>

</body>
</html>
